{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/meta-boxes-product.js"],"names":["jQuery","$","enhanced_select_format_string","language","errorLoading","wc_composite_admin_params","i18n_searching","inputTooLong","args","overChars","input","length","maximum","i18n_input_too_long_1","i18n_input_too_long_n","replace","inputTooShort","remainingChars","minimum","i18n_input_too_short_1","i18n_input_too_short_n","loadingMore","i18n_load_more","maximumSelected","i18n_selection_too_long_1","i18n_selection_too_long_n","noResults","i18n_no_matches","searching","fn","wc_cp_select2","filter","each","$el","select2_args","extend","minimumResultsForSearch","allowClear","data","placeholder","closeOnSelect","dropdownParent","closest","is_wc_version_gte_3_2","selectWoo","addClass","select2","on","e","removeData","preventDefault","$list","next","find","sortable","forcePlaceholderSize","items","tolerance","stop","get","reverse","id","option","prepend","minimumInputLength","escapeMarkup","m","ajax","url","wc_enhanced_select_params","ajax_url","dataType","delay","params","term","action","security","search_products_nonce","exclude","include","limit","processResults","terms","text","push","results","cache","hasClass","$component_el","component_el_id","component","component_objects","products_changed","prop","$children","children","sort","a","b","atext","toLowerCase","btext","html","wc_cp_select2_component_options","$select","quietMillis","i18n_none","i18n_all","$components_panel","$composite_price_calc","$components_toggle_toolbar","$components_container","$component_metaboxes","$components","component_add_count","component_data_dirty","component_image_frame_data","image_frame","$button","block_params","message","overlayCSS","background","opacity","tip_tip_params","attribute","fadeIn","fadeOut","layout_classes","layouts","index","layout","appendTo","woocommerce_admin_meta_boxes","woocommerce_writepanel_params","event","select_val","hide","show","change","val","off","$option","$selected","removeClass","join","new_calc","unset_default_found","component_object","is_optional","get_default_option","window","alert","i18n_defaults_unset","one","el","attr","set_component_data_dirty_state","update_components_toolbar_state","Component","self","$content","$metabox_title","$section_links","$sections","$discount","$filters","$display_prices","$pagination_style","$query_type_containers","$query_type_selector","$options_style_selector","$categories_selector","$products_selector","$default_selectors_container","$default_selectors","$default_selector_categories","$default_selector_products","$optional_checkbox","$title_input","$priced_individually_input","$show_filters_input","initialized_content","component_toggled","initialize","maybe_initialize_content","$el_content","setTimeout","toggleClass","slideToggle","initialize_content","section_changed","$section_link","title_changed","query_type_changed","query_type","reinitialize_default_option_category_select","maybe_update_default_option_category_ids","initialize_default_option_product_select","default_option_changed","categories_changed","category_ids","get_category_ids","optional_changed","options_style_changed","supports","pagination","priced_individually_input_changed","is","show_filters_input_changed","default_option","default_option_html","get_default_option_html","new_default_option","update_default_option","error","products_count","get_product_ids","has_error","add_error_tip","add_error","triggerHandler","append","clear_error","set_default_option","$target","offset","position","parent","after","css","left","width","top","height","tipTip","initialize_default_option_category_select","save_default_option_html","$options","clone","removeAttr","has_default","default_exists","remove","apply_default","first","initialize_select2s","$product_search_lazy","$enhanced_select_lazy","check_on_complete","get_default_option_category_ids","update_default_option_category_ids_xhr","abort","product_id","get_product_categories_nonce","post","response","set_default_option_category_ids","result","check_default_option_in_category_ids","is_default_option_in_category_ids","trigger","selection_data","get_selector_data","default_cat_ids","option_cat_ids","parseInt","is_valid","default_cat_index","default_cat_id","array_contains","default_option_category_ids","value","$default_option_html","default_option_id","$selector","product_ids","arr","inArray","is_dirty","init_component_event_handlers","el_id","block","post_id","add_component_nonce","$added","last","added_obj","added_id","unblock","open","wp","media","title","i18n_choose_component_image","button","i18n_set_component_image","states","controller","Library","filterable","attachment","state","toJSON","sizes","thumbnail","eq","$option_wrapper","$upload_button","wc_placeholder_img_src","init_component_metaboxes","cursor","axis","handle","scrollSensitivity","helper","start","ui","item","init_component_objects","init_components","init_nux","is_first_composite","focus"],"mappings":"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","file":"meta-boxes-product.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/meta-boxes-product.js\");\n","jQuery(function($) {\r\n\tvar enhanced_select_format_string = {\r\n\t\tlanguage: {\r\n\t\t\terrorLoading: function() {\r\n\t\t\t\t// Workaround for https://github.com/select2/select2/issues/4355 instead of i18n_ajax_error.\r\n\t\t\t\treturn wc_composite_admin_params.i18n_searching;\r\n\t\t\t},\r\n\t\t\tinputTooLong: function(args) {\r\n\t\t\t\tvar overChars = args.input.length - args.maximum;\r\n\r\n\t\t\t\tif (1 === overChars) {\r\n\t\t\t\t\treturn wc_composite_admin_params.i18n_input_too_long_1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn wc_composite_admin_params.i18n_input_too_long_n.replace(\r\n\t\t\t\t\t\"%qty%\",\r\n\t\t\t\t\toverChars\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tinputTooShort: function(args) {\r\n\t\t\t\tvar remainingChars = args.minimum - args.input.length;\r\n\r\n\t\t\t\tif (1 === remainingChars) {\r\n\t\t\t\t\treturn wc_composite_admin_params.i18n_input_too_short_1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn wc_composite_admin_params.i18n_input_too_short_n.replace(\r\n\t\t\t\t\t\"%qty%\",\r\n\t\t\t\t\tremainingChars\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tloadingMore: function() {\r\n\t\t\t\treturn wc_composite_admin_params.i18n_load_more;\r\n\t\t\t},\r\n\t\t\tmaximumSelected: function(args) {\r\n\t\t\t\tif (args.maximum === 1) {\r\n\t\t\t\t\treturn wc_composite_admin_params.i18n_selection_too_long_1;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn wc_composite_admin_params.i18n_selection_too_long_n.replace(\r\n\t\t\t\t\t\"%qty%\",\r\n\t\t\t\t\targs.maximum\r\n\t\t\t\t);\r\n\t\t\t},\r\n\t\t\tnoResults: function() {\r\n\t\t\t\treturn wc_composite_admin_params.i18n_no_matches;\r\n\t\t\t},\r\n\t\t\tsearching: function() {\r\n\t\t\t\treturn wc_composite_admin_params.i18n_searching;\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t// Regular select2 fields init. Code duplicated to prevent expensive DOM searches when firing 'wc-enhanced-select-init'.\r\n\t$.fn.wc_cp_select2 = function() {\r\n\t\t// Regular select boxes.\r\n\t\t$(\":input.wc-enhanced-select\", this)\r\n\t\t\t.filter(\":not(.enhanced)\")\r\n\t\t\t.each(function() {\r\n\t\t\t\tvar $el = $(this),\r\n\t\t\t\t\tselect2_args = $.extend(\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tminimumResultsForSearch: 10,\r\n\t\t\t\t\t\t\tallowClear: $el.data(\"allow_clear\") ? true : false,\r\n\t\t\t\t\t\t\tplaceholder: $el.data(\"placeholder\"),\r\n\t\t\t\t\t\t\tcloseOnSelect: true,\r\n\t\t\t\t\t\t\tdropdownParent: $el.closest(\"#bto_product_data\")\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tenhanced_select_format_string\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\tif (\"yes\" === wc_composite_admin_params.is_wc_version_gte_3_2) {\r\n\t\t\t\t\t$el.selectWoo(select2_args).addClass(\"enhanced\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$el.select2(select2_args).addClass(\"enhanced\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Prevent opening on delete.\r\n\t\t\t\t$el.on(\"select2:unselecting\", function() {\r\n\t\t\t\t\t$el.data(\"unselecting\", true);\r\n\t\t\t\t})\r\n\t\t\t\t.on(\"select2:opening\", function(e) {\r\n\t\t\t\t\tif ($el.data(\"unselecting\")) {\r\n\t\t\t\t\t\t$el.removeData(\"unselecting\");\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ($el.data(\"sortable\")) {\r\n\t\t\t\t\tvar $list = $el\r\n\t\t\t\t\t\t.next(\".select2-container\")\r\n\t\t\t\t\t\t.find(\"ul.select2-selection__rendered\");\r\n\r\n\t\t\t\t\t$list.sortable({\r\n\t\t\t\t\t\tplaceholder:\r\n\t\t\t\t\t\t\t\"ui-state-highlight select2-selection__choice\",\r\n\t\t\t\t\t\tforcePlaceholderSize: true,\r\n\t\t\t\t\t\titems: \"li:not(.select2-search__field)\",\r\n\t\t\t\t\t\ttolerance: \"pointer\",\r\n\t\t\t\t\t\tstop: function() {\r\n\t\t\t\t\t\t\t$(\r\n\t\t\t\t\t\t\t\t$list\r\n\t\t\t\t\t\t\t\t\t.find(\".select2-selection__choice\")\r\n\t\t\t\t\t\t\t\t\t.get()\r\n\t\t\t\t\t\t\t\t\t.reverse()\r\n\t\t\t\t\t\t\t).each(function() {\r\n\t\t\t\t\t\t\t\tvar id = $(this).data(\"data\").id,\r\n\t\t\t\t\t\t\t\t\toption = $el.find(\r\n\t\t\t\t\t\t\t\t\t\t'option[value=\"' + id + '\"]'\r\n\t\t\t\t\t\t\t\t\t)[0];\r\n\r\n\t\t\t\t\t\t\t\t$el.prepend(option);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t// Ajax product search box.\r\n\t\t$(\":input.wc-product-search\", this)\r\n\t\t\t.filter(\":not(.enhanced)\")\r\n\t\t\t.each(function() {\r\n\t\t\t\tvar $el = $(this),\r\n\t\t\t\t\tselect2_args = {\r\n\t\t\t\t\t\tallowClear: $el.data(\"allow_clear\") ? true : false,\r\n\t\t\t\t\t\tplaceholder: $el.data(\"placeholder\"),\r\n\t\t\t\t\t\tminimumInputLength: $el.data(\"minimum_input_length\")\r\n\t\t\t\t\t\t\t? $el.data(\"minimum_input_length\")\r\n\t\t\t\t\t\t\t: \"3\",\r\n\t\t\t\t\t\tescapeMarkup: function(m) {\r\n\t\t\t\t\t\t\treturn m;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tajax: {\r\n\t\t\t\t\t\t\turl: wc_enhanced_select_params.ajax_url,\r\n\t\t\t\t\t\t\tdataType: \"json\",\r\n\t\t\t\t\t\t\tdelay: 250,\r\n\t\t\t\t\t\t\tdata: function(params) {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tterm: params.term,\r\n\t\t\t\t\t\t\t\t\taction:\r\n\t\t\t\t\t\t\t\t\t\t$el.data(\"action\") ||\r\n\t\t\t\t\t\t\t\t\t\t\"woocommerce_json_search_products_and_variations\",\r\n\t\t\t\t\t\t\t\t\tsecurity:\r\n\t\t\t\t\t\t\t\t\t\twc_enhanced_select_params.search_products_nonce,\r\n\t\t\t\t\t\t\t\t\texclude: $el.data(\"exclude\"),\r\n\t\t\t\t\t\t\t\t\tinclude: $el.data(\"include\"),\r\n\t\t\t\t\t\t\t\t\tlimit: $el.data(\"limit\")\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tprocessResults: function(data) {\r\n\t\t\t\t\t\t\t\tvar terms = [];\r\n\t\t\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\t\t\t$.each(data, function(id, text) {\r\n\t\t\t\t\t\t\t\t\t\tterms.push({id: id, text: text});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tresults: terms\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcache: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\tselect2_args = $.extend(\r\n\t\t\t\t\tselect2_args,\r\n\t\t\t\t\tenhanced_select_format_string\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (\"yes\" === wc_composite_admin_params.is_wc_version_gte_3_2) {\r\n\t\t\t\t\t$el.selectWoo(select2_args).addClass(\"enhanced\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$el.select2(select2_args).addClass(\"enhanced\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Prevent opening on delete.\r\n\t\t\t\t$el.on(\"select2:unselecting\", function() {\r\n\t\t\t\t\t$el.data(\"unselecting\", true);\r\n\t\t\t\t})\r\n\t\t\t\t.on(\"select2:opening\", function(e) {\r\n\t\t\t\t\tif ($el.data(\"unselecting\")) {\r\n\t\t\t\t\t\t$el.removeData(\"unselecting\");\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif ($el.data(\"sortable\")) {\r\n\t\t\t\t\tvar $list = $(this)\r\n\t\t\t\t\t\t.next(\".select2-container\")\r\n\t\t\t\t\t\t.find(\"ul.select2-selection__rendered\");\r\n\r\n\t\t\t\t\t$list.sortable({\r\n\t\t\t\t\t\tplaceholder:\r\n\t\t\t\t\t\t\t\"ui-state-highlight select2-selection__choice\",\r\n\t\t\t\t\t\tforcePlaceholderSize: true,\r\n\t\t\t\t\t\titems: \"li:not(.select2-search__field)\",\r\n\t\t\t\t\t\ttolerance: \"pointer\",\r\n\t\t\t\t\t\tstop: function() {\r\n\t\t\t\t\t\t\t$(\r\n\t\t\t\t\t\t\t\t$list\r\n\t\t\t\t\t\t\t\t\t.find(\".select2-selection__choice\")\r\n\t\t\t\t\t\t\t\t\t.get()\r\n\t\t\t\t\t\t\t\t\t.reverse()\r\n\t\t\t\t\t\t\t).each(function() {\r\n\t\t\t\t\t\t\t\tvar id = $(this).data(\"data\").id,\r\n\t\t\t\t\t\t\t\t\toption = $el.find(\r\n\t\t\t\t\t\t\t\t\t\t'option[value=\"' + id + '\"]'\r\n\t\t\t\t\t\t\t\t\t)[0];\r\n\r\n\t\t\t\t\t\t\t\t$el.prepend(option);\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\tif ($el.hasClass(\"products_selector\")) {\r\n\t\t\t\t\t\t\t\tvar $component_el = $el.closest(\".bto_group\"),\r\n\t\t\t\t\t\t\t\t\tcomponent_el_id = $component_el.data(\r\n\t\t\t\t\t\t\t\t\t\t\"component_metabox_id\"\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\tcomponent =\r\n\t\t\t\t\t\t\t\t\t\tcomponent_objects[component_el_id];\r\n\r\n\t\t\t\t\t\t\t\tcomponent.products_changed();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// Keep multiselects ordered alphabetically if they are not sortable.\r\n\t\t\t\t} else if ($el.prop(\"multiple\")) {\r\n\t\t\t\t\t$el.on(\"change\", function() {\r\n\t\t\t\t\t\tvar $children = $el.children();\r\n\r\n\t\t\t\t\t\t$children.sort(function(a, b) {\r\n\t\t\t\t\t\t\tvar atext = a.text.toLowerCase(),\r\n\t\t\t\t\t\t\t\tbtext = b.text.toLowerCase();\r\n\r\n\t\t\t\t\t\t\tif (atext > btext) {\r\n\t\t\t\t\t\t\t\treturn 1;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (atext < btext) {\r\n\t\t\t\t\t\t\t\treturn -1;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\treturn 0;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t$el.html($children);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\r\n\t// Custom select2 fields init.\r\n\t$.fn.wc_cp_select2_component_options = function() {\r\n\t\t$(\":input.wc-component-options-search\", this)\r\n\t\t\t.filter(\":not(.enhanced)\")\r\n\t\t\t.each(function() {\r\n\t\t\t\tvar $select = $(this),\r\n\t\t\t\t\taction = $select.data(\"action\"),\r\n\t\t\t\t\tselect2_args = {\r\n\t\t\t\t\t\tallowClear: $select.data(\"allow_clear\") ? true : false,\r\n\t\t\t\t\t\tplaceholder: $select.data(\"placeholder\"),\r\n\t\t\t\t\t\tminimumInputLength: $select.data(\"minimum_input_length\")\r\n\t\t\t\t\t\t\t? $(this).data(\"minimum_input_length\")\r\n\t\t\t\t\t\t\t: \"3\",\r\n\t\t\t\t\t\tescapeMarkup: function(m) {\r\n\t\t\t\t\t\t\treturn m;\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tajax: {\r\n\t\t\t\t\t\t\turl: wc_enhanced_select_params.ajax_url,\r\n\t\t\t\t\t\t\tdataType: \"json\",\r\n\t\t\t\t\t\t\tquietMillis: 250,\r\n\t\t\t\t\t\t\tdata: function(params) {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tterm: params.term,\r\n\t\t\t\t\t\t\t\t\taction: action,\r\n\t\t\t\t\t\t\t\t\tsecurity:\r\n\t\t\t\t\t\t\t\t\t\twc_enhanced_select_params.search_products_nonce,\r\n\t\t\t\t\t\t\t\t\texclude: $select.data(\"exclude\"),\r\n\t\t\t\t\t\t\t\t\tinclude: $select.data(\"include\"),\r\n\t\t\t\t\t\t\t\t\tlimit: $select.data(\"limit\")\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tprocessResults: function(data) {\r\n\t\t\t\t\t\t\t\tvar terms = [];\r\n\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\t\"yes\" === $select.data(\"component_optional\")\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tterms.push({\r\n\t\t\t\t\t\t\t\t\t\tid: \"-1\",\r\n\t\t\t\t\t\t\t\t\t\ttext:\r\n\t\t\t\t\t\t\t\t\t\t\twc_composite_admin_params.i18n_none\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tterms.push({\r\n\t\t\t\t\t\t\t\t\tid: \"0\",\r\n\t\t\t\t\t\t\t\t\ttext: wc_composite_admin_params.i18n_all\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\t\t\t\t$.each(data, function(id, text) {\r\n\t\t\t\t\t\t\t\t\t\tterms.push({id: id, text: text});\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\treturn {results: terms};\r\n\t\t\t\t\t\t\t},\r\n\r\n\t\t\t\t\t\t\tcache: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\tselect2_args = $.extend(\r\n\t\t\t\t\tselect2_args,\r\n\t\t\t\t\tenhanced_select_format_string\r\n\t\t\t\t);\r\n\r\n\t\t\t\tif (\"yes\" === wc_composite_admin_params.is_wc_version_gte_3_2) {\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.selectWoo(select2_args)\r\n\t\t\t\t\t\t.addClass(\"enhanced\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$(this)\r\n\t\t\t\t\t\t.select2(select2_args)\r\n\t\t\t\t\t\t.addClass(\"enhanced\");\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Prevent opening on delete.\r\n\t\t\t\t$select\r\n\t\t\t\t\t.on(\"select2:unselecting\", function() {\r\n\t\t\t\t\t\t$select.data(\"unselecting\", true);\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\t.on(\"select2:opening\", function(e) {\r\n\t\t\t\t\t\tif ($select.data(\"unselecting\")) {\r\n\t\t\t\t\t\t\t$select.removeData(\"unselecting\");\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t});\r\n\t};\r\n\r\n\tvar $components_panel = $(\"#bto_product_data\"),\r\n\t\t$composite_price_calc = $components_panel.find(\"#_bto_shop_price_calc\"),\r\n\t\t$components_toggle_toolbar = $components_panel.find(\r\n\t\t\t\".bulk_toggle_wrapper\"\r\n\t\t),\r\n\t\t$components_container = $(\".config_group\", $components_panel),\r\n\t\t$component_metaboxes = $(\".bto_groups\", $components_container),\r\n\t\t$components = $(\".bto_group\", $component_metaboxes),\r\n\t\tcomponent_add_count = $components.length,\r\n\t\tcomponent_objects = {},\r\n\t\tcomponent_data_dirty = false,\r\n\t\tcomponent_image_frame_data = {\r\n\t\t\timage_frame: false,\r\n\t\t\t$button: false\r\n\t\t},\r\n\t\tblock_params = {\r\n\t\t\tmessage: null,\r\n\t\t\toverlayCSS: {\r\n\t\t\t\tbackground: \"#fff\",\r\n\t\t\t\topacity: 0.6\r\n\t\t\t}\r\n\t\t},\r\n\t\ttip_tip_params = {\r\n\t\t\tattribute: \"data-tip\",\r\n\t\t\tfadeIn: 50,\r\n\t\t\tfadeOut: 50,\r\n\t\t\tdelay: 200\r\n\t\t},\r\n\t\tlayout_classes = [];\r\n\r\n\t// Prepare layout classes.\r\n\t$.each(wc_composite_admin_params.layouts, function(index, layout) {\r\n\t\tlayout_classes.push(\"layout-\" + layout);\r\n\t});\r\n\r\n\t// Composite type move stock msg up.\r\n\t$(\".composite_stock_msg\").appendTo(\"._manage_stock_field .description\");\r\n\r\n\t// Hide the default \"Sold Individually\" field.\r\n\t$(\"#_sold_individually\")\r\n\t\t.closest(\".form-field\")\r\n\t\t.addClass(\"hide_if_composite\");\r\n\r\n\t// Hide the \"Grouping\" field.\r\n\t$(\r\n\t\t\"#linked_product_data .grouping.show_if_simple, #linked_product_data .form-field.show_if_grouped\"\r\n\t).addClass(\"hide_if_composite\");\r\n\r\n\t// Simple type options are valid for bundles.\r\n\t$(\".show_if_simple:not(.hide_if_composite)\").addClass(\"show_if_composite\");\r\n\r\n\tif (typeof woocommerce_admin_meta_boxes === \"undefined\") {\r\n\t\twoocommerce_admin_meta_boxes = woocommerce_writepanel_params;\r\n\t}\r\n\r\n\t// Composite type specific options.\r\n\t$(\"body\").on(\"woocommerce-product-type-change\", function(\r\n\t\tevent,\r\n\t\tselect_val\r\n\t) {\r\n\t\tif (\"composite\" === select_val) {\r\n\t\t\t$(\".show_if_external\").hide();\r\n\t\t\t$(\".show_if_composite\").show();\r\n\r\n\t\t\t$(\"input#_manage_stock\").change();\r\n\t\t}\r\n\t});\r\n\r\n\t// Trigger product type change.\r\n\t$(\"select#product-type\").change();\r\n\r\n\t// Downloadable support.\r\n\t$(\"input#_downloadable\").change(function() {\r\n\t\t$(\"select#product-type\").change();\r\n\t});\r\n\r\n\t// Save initial 'Catalog Price' value.\r\n\t$composite_price_calc.data(\"val\", $composite_price_calc.val());\r\n\r\n\t/*\r\n\t * Handle events in Components panel.\r\n\t */\r\n\t$components_panel\r\n\r\n\t\t// Ignore other click events.\r\n\t\t.off(\"click\")\r\n\r\n\t\t// Layout selection.\r\n\t\t.on(\"click\", \".bto_layout_label\", function() {\r\n\t\t\tvar $option = $(this),\r\n\t\t\t\t$selected = $option.closest(\".bto_layouts\").find(\".selected\");\r\n\r\n\t\t\t$selected.removeClass(\"selected\");\r\n\t\t\t$option.addClass(\"selected\");\r\n\r\n\t\t\t$components_container.removeClass(layout_classes.join(\" \"));\r\n\t\t\t$components_container.addClass(\r\n\t\t\t\t\"layout-\" + $option.find(\"input\").val()\r\n\t\t\t);\r\n\t\t})\r\n\r\n\t\t// Trigger event when 'Catalog Price' option changes.\r\n\t\t.on(\"change\", \"#_bto_shop_price_calc\", function() {\r\n\t\t\tvar new_calc = $(this).val(),\r\n\t\t\t\tunset_default_found = false;\r\n\r\n\t\t\t// Any components with an empty default?\r\n\t\t\tif (\"defaults\" === new_calc) {\r\n\t\t\t\t$.each(component_objects, function(index, component_object) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t!component_object.is_optional() &&\r\n\t\t\t\t\t\t!component_object.get_default_option()\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tunset_default_found = true;\r\n\r\n\t\t\t\t\t\t// Alert user.\r\n\t\t\t\t\t\twindow.alert(\r\n\t\t\t\t\t\t\twc_composite_admin_params.i18n_defaults_unset\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\t// Put back the old value.\r\n\t\t\t\t\t\t$composite_price_calc.val(\r\n\t\t\t\t\t\t\t$composite_price_calc.data(\"val\")\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tif (!unset_default_found) {\r\n\t\t\t\t$composite_price_calc.data(\"val\", new_calc);\r\n\t\t\t}\r\n\t\t})\r\n\r\n\t\t// Remove onboarding elements when adding component.\r\n\t\t.one(\"wc-cp-component-added\", function() {\r\n\t\t\t$components_container.removeClass(\"options_group--boarding\");\r\n\t\t})\r\n\r\n\t\t// Update component DOM elements, menu order and toolbar state.\r\n\t\t.on(\"wc-cp-components-changed\", function() {\r\n\t\t\t$component_metaboxes = $(\".bto_groups\", $components_container);\r\n\t\t\t$components = $(\".bto_group\", $component_metaboxes);\r\n\r\n\t\t\t$components.each(function(index, el) {\r\n\t\t\t\t$(\".group_position\", el).val(index);\r\n\t\t\t\t$(el).attr(\"rel\", index);\r\n\t\t\t});\r\n\r\n\t\t\t// Component data must be saved before viewing the Scenarios panel, or adding new scenarios.\r\n\t\t\tset_component_data_dirty_state(true);\r\n\r\n\t\t\tupdate_components_toolbar_state();\r\n\t\t});\r\n\r\n\t/*------------------------------------------*/\r\n\t/*  Components                              */\r\n\t/*------------------------------------------*/\r\n\r\n\tfunction Component($el) {\r\n\t\tvar self = this;\r\n\r\n\t\tthis.$el = $el;\r\n\t\tthis.$content = $el.find(\".bto_group_data\");\r\n\t\tthis.$metabox_title = $el.find(\"h3 .group_name\");\r\n\t\tthis.$section_links = this.$content.find(\".subsubsub a\");\r\n\t\tthis.$sections = this.$content.find(\".tab_group\");\r\n\t\tthis.$discount = this.$content.find(\".group_discount\");\r\n\t\tthis.$filters = this.$content.find(\".group_filters\");\r\n\t\tthis.$display_prices = this.$content.find(\".component_display_prices\");\r\n\t\tthis.$pagination_style = this.$content.find(\r\n\t\t\t\".component_pagination_style\"\r\n\t\t);\r\n\r\n\t\tthis.$query_type_containers = this.$content.find(\r\n\t\t\t\".component_query_type_selector\"\r\n\t\t);\r\n\t\tthis.$query_type_selector = this.$content.find(\r\n\t\t\t\"select.component_query_type\"\r\n\t\t);\r\n\t\tthis.$options_style_selector = this.$content.find(\r\n\t\t\t\"select.options_style_selector\"\r\n\t\t);\r\n\r\n\t\tthis.$categories_selector = this.$content.find(\r\n\t\t\t\"select.categories_selector\"\r\n\t\t);\r\n\t\tthis.$products_selector = this.$content.find(\r\n\t\t\t\"select.products_selector\"\r\n\t\t);\r\n\r\n\t\tthis.$default_selectors_container = this.$content.find(\r\n\t\t\t\".default_selector_container\"\r\n\t\t);\r\n\t\tthis.$default_selectors = this.$content.find(\r\n\t\t\t\".default_selector_wrapper\"\r\n\t\t);\r\n\r\n\t\tthis.$default_selector_categories = this.$content.find(\r\n\t\t\t\"select.default_selector_categories\"\r\n\t\t);\r\n\t\tthis.$default_selector_products = this.$content.find(\r\n\t\t\t\"select.default_selector_products\"\r\n\t\t);\r\n\r\n\t\tthis.$optional_checkbox = this.$content.find(\r\n\t\t\t\"input.component_optional\"\r\n\t\t);\r\n\r\n\t\tthis.$title_input = this.$content.find(\"input.group_title\");\r\n\t\tthis.$priced_individually_input = this.$content.find(\r\n\t\t\t\".group_priced_individually input\"\r\n\t\t);\r\n\t\tthis.$show_filters_input = this.$content.find(\r\n\t\t\t\".group_show_filters input\"\r\n\t\t);\r\n\r\n\t\tthis.initialized_content = false;\r\n\r\n\t\tthis.component_toggled = function() {\r\n\t\t\tvar initialize = self.maybe_initialize_content(),\r\n\t\t\t\tdelay = initialize ? 50 : 10;\r\n\r\n\t\t\tvar $el = this.$el,\r\n\t\t\t\t$el_content = this.$content;\r\n\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t$el.toggleClass(\"closed\").toggleClass(\"open\");\r\n\t\t\t\t$el_content.stop().slideToggle();\r\n\t\t\t}, delay);\r\n\t\t};\r\n\r\n\t\tthis.maybe_initialize_content = function() {\r\n\t\t\tvar initialize_content = false;\r\n\r\n\t\t\tif (!self.initialized_content) {\r\n\t\t\t\tinitialize_content = true;\r\n\t\t\t\tself.initialize_content();\r\n\t\t\t}\r\n\r\n\t\t\treturn initialize_content;\r\n\t\t};\r\n\r\n\t\tthis.section_changed = function($section_link) {\r\n\t\t\tself.$section_links.removeClass(\"current\");\r\n\t\t\t$section_link.addClass(\"current\");\r\n\r\n\t\t\tself.$sections.addClass(\"tab_group_hidden\");\r\n\t\t\tself.$content\r\n\t\t\t\t.find(\".tab_group_\" + $section_link.data(\"tab\"))\r\n\t\t\t\t.removeClass(\"tab_group_hidden\");\r\n\t\t};\r\n\r\n\t\tthis.title_changed = function() {\r\n\t\t\tself.$metabox_title.text(self.$title_input.val());\r\n\r\n\t\t\t// Component data must be saved before viewing the Scenarios panel, or adding new scenarios.\r\n\t\t\tset_component_data_dirty_state(true);\r\n\t\t};\r\n\r\n\t\tthis.query_type_changed = function() {\r\n\t\t\tself.$query_type_containers.hide();\r\n\t\t\tself.$default_selectors.hide();\r\n\r\n\t\t\tvar query_type = self.$query_type_selector.val();\r\n\r\n\t\t\tself.$content.find(\".component_query_type_\" + query_type).show();\r\n\r\n\t\t\tif (this.initialized_content) {\r\n\t\t\t\tif (\"category_ids\" === query_type) {\r\n\t\t\t\t\tself.reinitialize_default_option_category_select();\r\n\t\t\t\t\tself.maybe_update_default_option_category_ids(true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.initialize_default_option_product_select();\r\n\t\t\t\t\tself.default_option_changed();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Component data must be saved before viewing the Scenarios panel, or adding new scenarios.\r\n\t\t\t\tset_component_data_dirty_state(true);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.products_changed = function() {\r\n\t\t\tself.initialize_default_option_product_select();\r\n\t\t\tself.default_option_changed();\r\n\r\n\t\t\t// Component data must be saved before viewing the Scenarios panel, or adding new scenarios.\r\n\t\t\tset_component_data_dirty_state(true);\r\n\t\t};\r\n\r\n\t\tthis.categories_changed = function() {\r\n\t\t\tvar category_ids = self.get_category_ids();\r\n\r\n\t\t\t// Copy active category IDs on 'include' data attribute. Will be used when searching for a default.\r\n\t\t\tself.$default_selector_categories.data(\r\n\t\t\t\t\"include\",\r\n\t\t\t\tcategory_ids.join()\r\n\t\t\t);\r\n\r\n\t\t\t// If needed, fetch the category IDs of the defult option and check if they are valid.\r\n\t\t\tself.maybe_update_default_option_category_ids(true);\r\n\r\n\t\t\t// Component data must be saved before viewing the Scenarios panel, or adding new scenarios.\r\n\t\t\tset_component_data_dirty_state(true);\r\n\t\t};\r\n\r\n\t\tthis.optional_changed = function() {\r\n\t\t\tself.default_option_changed();\r\n\r\n\t\t\t// Component data must be saved before viewing the Scenarios panel, or adding new scenarios.\r\n\t\t\tset_component_data_dirty_state(true);\r\n\t\t};\r\n\r\n\t\tthis.options_style_changed = function() {\r\n\t\t\tvar supports = self.$options_style_selector\r\n\t\t\t\t.find(\r\n\t\t\t\t\t'option[value=\"' + self.$options_style_selector.val() + '\"]'\r\n\t\t\t\t)\r\n\t\t\t\t.data(\"supports\");\r\n\r\n\t\t\tif (\"yes\" === supports.pagination) {\r\n\t\t\t\tself.$pagination_style.show();\r\n\t\t\t} else {\r\n\t\t\t\tself.$pagination_style.hide();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.priced_individually_input_changed = function() {\r\n\t\t\tif (self.$priced_individually_input.is(\":checked\")) {\r\n\t\t\t\tself.$discount.show();\r\n\t\t\t\tself.$display_prices.show();\r\n\t\t\t} else {\r\n\t\t\t\tself.$discount.hide();\r\n\t\t\t\tself.$display_prices.hide();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.show_filters_input_changed = function() {\r\n\t\t\tif (self.$show_filters_input.is(\":checked\")) {\r\n\t\t\t\tself.$filters.show();\r\n\t\t\t} else {\r\n\t\t\t\tself.$filters.hide();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.default_option_changed = function() {\r\n\t\t\tvar query_type = self.$query_type_selector.val(),\r\n\t\t\t\tdefault_option = self.get_default_option(),\r\n\t\t\t\tdefault_option_html = self.get_default_option_html(),\r\n\t\t\t\tnew_default_option =\r\n\t\t\t\t\t\"category_ids\" === query_type\r\n\t\t\t\t\t\t? self.$default_selector_categories.val()\r\n\t\t\t\t\t\t: self.$default_selector_products.val(),\r\n\t\t\t\tupdate_default_option = true,\r\n\t\t\t\terror = false;\r\n\r\n\t\t\tif (!new_default_option && !self.is_optional()) {\r\n\t\t\t\tif (\"category_ids\" === query_type) {\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\t\"defaults\" === $composite_price_calc.val() &&\r\n\t\t\t\t\t\tself.get_category_ids().length > 0\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\terror = \"set_defaults\";\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar products_count = self.get_product_ids().length;\r\n\r\n\t\t\t\t\tif (products_count > 0) {\r\n\t\t\t\t\t\tif (\"defaults\" === $composite_price_calc.val()) {\r\n\t\t\t\t\t\t\terror = \"set_defaults\";\r\n\t\t\t\t\t\t} else if (products_count === 1) {\r\n\t\t\t\t\t\t\terror = \"set_defaults_static\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (error) {\r\n\t\t\t\tif (!self.has_error(self.$default_selectors_container)) {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tself.add_error_tip(\r\n\t\t\t\t\t\t\tself.$default_selectors_container,\r\n\t\t\t\t\t\t\terror\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}, 5);\r\n\r\n\t\t\t\t\tif (!default_option) {\r\n\t\t\t\t\t\tself.add_error(\r\n\t\t\t\t\t\t\tself.$default_selectors_container,\r\n\t\t\t\t\t\t\terror\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (\"product_ids\" === query_type) {\r\n\t\t\t\t\t// Product selector: Set value.\r\n\t\t\t\t\tself.$default_selector_products\r\n\t\t\t\t\t\t.val(default_option)\r\n\t\t\t\t\t\t.triggerHandler(\"change\");\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Category selector: Put option back in.\r\n\t\t\t\t\tif (default_option_html) {\r\n\t\t\t\t\t\tself.$default_selector_categories\r\n\t\t\t\t\t\t\t.append(default_option_html)\r\n\t\t\t\t\t\t\t.val(default_option)\r\n\t\t\t\t\t\t\t.triggerHandler(\"change\");\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tupdate_default_option = false;\r\n\t\t\t}\r\n\r\n\t\t\tif (update_default_option) {\r\n\t\t\t\tself.clear_error(self.$default_selectors_container);\r\n\t\t\t\tself.set_default_option(new_default_option);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.add_error_tip = function($target, error) {\r\n\t\t\tvar offset = $target.position();\r\n\r\n\t\t\tif ($target.parent().find(\".wc_error_tip\").length === 0) {\r\n\t\t\t\t$target.after(\r\n\t\t\t\t\t'<div class=\"wc_error_tip\">' +\r\n\t\t\t\t\t\twc_composite_admin_params[\"i18n_\" + error] +\r\n\t\t\t\t\t\t\"</div>\"\r\n\t\t\t\t);\r\n\t\t\t\t$target\r\n\t\t\t\t\t.parent()\r\n\t\t\t\t\t.find(\".wc_error_tip\")\r\n\t\t\t\t\t.css(\r\n\t\t\t\t\t\t\"left\",\r\n\t\t\t\t\t\toffset.left +\r\n\t\t\t\t\t\t\t$target.width() -\r\n\t\t\t\t\t\t\t$target.width() / 2 -\r\n\t\t\t\t\t\t\t$(\".wc_error_tip\").width() / 2\r\n\t\t\t\t\t)\r\n\t\t\t\t\t.css(\"top\", offset.top + $target.height())\r\n\t\t\t\t\t.fadeIn(\"100\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.has_error = function($target) {\r\n\t\t\treturn $target.hasClass(\"selection_error\");\r\n\t\t};\r\n\r\n\t\tthis.add_error = function($target, error) {\r\n\t\t\t$target\r\n\t\t\t\t.find(\".wc-cp-error-tip\")\r\n\t\t\t\t.attr(\"data-tip\", wc_composite_admin_params[\"i18n_\" + error]);\r\n\t\t\t$target.find(\".wc-cp-error-tip\").tipTip(tip_tip_params);\r\n\t\t\t$target.addClass(\"selection_error\");\r\n\t\t};\r\n\r\n\t\tthis.clear_error = function($target) {\r\n\t\t\t$target.removeClass(\"selection_error\");\r\n\t\t};\r\n\r\n\t\tthis.initialize = function() {\r\n\t\t\tself.query_type_changed();\r\n\t\t\tself.options_style_changed();\r\n\t\t\tself.priced_individually_input_changed();\r\n\t\t\tself.show_filters_input_changed();\r\n\t\t};\r\n\r\n\t\tthis.initialize_default_option_category_select = function() {\r\n\t\t\tif (\"undefined\" === typeof self.get_default_option_html()) {\r\n\t\t\t\tself.save_default_option_html();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.reinitialize_default_option_category_select = function() {\r\n\t\t\tvar default_option = self.get_default_option(),\r\n\t\t\t\tdefault_option_html = self.get_default_option_html();\r\n\r\n\t\t\tif (default_option_html) {\r\n\t\t\t\tself.$default_selector_categories.append(default_option_html);\r\n\t\t\t}\r\n\r\n\t\t\tself.$default_selector_categories\r\n\t\t\t\t.val(default_option)\r\n\t\t\t\t.triggerHandler(\"change\");\r\n\t\t};\r\n\r\n\t\tthis.initialize_default_option_product_select = function() {\r\n\t\t\tvar $options = self.$products_selector\r\n\t\t\t\t\t.find(\":selected\")\r\n\t\t\t\t\t.clone()\r\n\t\t\t\t\t.removeAttr(\"selected\"),\r\n\t\t\t\thas_default = self.get_default_option(),\r\n\t\t\t\tdefault_exists =\r\n\t\t\t\t\thas_default &&\r\n\t\t\t\t\t$options.filter(\r\n\t\t\t\t\t\t'[value=\"' + self.get_default_option() + '\"]'\r\n\t\t\t\t\t).length > 0;\r\n\r\n\t\t\tself.$default_selector_products.find(\"option\").remove();\r\n\t\t\tself.$default_selector_products.append($options);\r\n\r\n\t\t\tif (!default_exists) {\r\n\t\t\t\tvar apply_default =\r\n\t\t\t\t\t!self.is_optional() &&\r\n\t\t\t\t\t$options.length > 0 &&\r\n\t\t\t\t\t(\"defaults\" === $composite_price_calc.val() ||\r\n\t\t\t\t\t\t1 === $options.length)\r\n\t\t\t\t\t\t? $options.first().val()\r\n\t\t\t\t\t\t: 0;\r\n\t\t\t\tself.set_default_option(apply_default);\r\n\t\t\t}\r\n\r\n\t\t\tself.$default_selector_products\r\n\t\t\t\t.val(self.get_default_option())\r\n\t\t\t\t.triggerHandler(\"change\");\r\n\t\t};\r\n\r\n\t\tthis.initialize_content = function() {\r\n\t\t\tvar query_type = self.$query_type_selector.val();\r\n\r\n\t\t\tif (\"category_ids\" === query_type) {\r\n\t\t\t\tself.initialize_default_option_category_select();\r\n\t\t\t} else {\r\n\t\t\t\tself.initialize_default_option_product_select();\r\n\t\t\t}\r\n\r\n\t\t\tself.initialize_select2s();\r\n\r\n\t\t\tself.initialized_content = true;\r\n\t\t};\r\n\r\n\t\tthis.initialize_select2s = function() {\r\n\t\t\tvar $product_search_lazy = self.$content.find(\r\n\t\t\t\t\t\".wc-product-search-lazy\"\r\n\t\t\t\t),\r\n\t\t\t\t$enhanced_select_lazy = self.$content.find(\r\n\t\t\t\t\t\".wc-enhanced-select-lazy\"\r\n\t\t\t\t);\r\n\r\n\t\t\t$product_search_lazy.addClass(\"wc-product-search\");\r\n\t\t\t$enhanced_select_lazy.addClass(\"wc-enhanced-select\");\r\n\r\n\t\t\tself.$content.wc_cp_select2();\r\n\r\n\t\t\t$product_search_lazy.removeClass(\"wc-product-search\");\r\n\t\t\t$enhanced_select_lazy.removeClass(\"wc-enhanced-select\");\r\n\t\t};\r\n\r\n\t\tthis.maybe_update_default_option_category_ids = function(\r\n\t\t\tcheck_on_complete\r\n\t\t) {\r\n\t\t\tcheck_on_complete = check_on_complete || false;\r\n\r\n\t\t\t// Fetch categories if needed.\r\n\t\t\tif (null === self.get_default_option_category_ids()) {\r\n\t\t\t\tif (self.update_default_option_category_ids_xhr) {\r\n\t\t\t\t\tself.update_default_option_category_ids_xhr.abort();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\taction: \"woocommerce_get_product_categories\",\r\n\t\t\t\t\tproduct_id: self.get_default_option(),\r\n\t\t\t\t\tsecurity:\r\n\t\t\t\t\t\twc_composite_admin_params.get_product_categories_nonce\r\n\t\t\t\t};\r\n\r\n\t\t\t\tself.update_default_option_category_ids_xhr = $.post(\r\n\t\t\t\t\twoocommerce_admin_meta_boxes.ajax_url,\r\n\t\t\t\t\tdata,\r\n\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\tself.set_default_option_category_ids(\r\n\t\t\t\t\t\t\t\"success\" === response.result\r\n\t\t\t\t\t\t\t\t? response.category_ids\r\n\t\t\t\t\t\t\t\t: []\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\tif (check_on_complete) {\r\n\t\t\t\t\t\t\tself.check_default_option_in_category_ids();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t} else if (check_on_complete) {\r\n\t\t\t\tself.check_default_option_in_category_ids();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.check_default_option_in_category_ids = function() {\r\n\t\t\tif (\r\n\t\t\t\t(self.get_default_option() &&\r\n\t\t\t\t\t!self.is_default_option_in_category_ids()) ||\r\n\t\t\t\tself.get_category_ids().length === 0\r\n\t\t\t) {\r\n\t\t\t\tself.set_default_option(0);\r\n\t\t\t\tself.$default_selector_categories.val(0).trigger(\"change\");\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.is_default_option_in_category_ids = function() {\r\n\t\t\t// Check if the current default is within the included categories.\r\n\t\t\tvar selection_data = self.get_selector_data(\r\n\t\t\t\t\tself.$categories_selector\r\n\t\t\t\t),\r\n\t\t\t\tdefault_cat_ids = self.get_default_option_category_ids(),\r\n\t\t\t\toption_cat_ids = [];\r\n\r\n\t\t\t$.each(selection_data, function(index, data) {\r\n\t\t\t\toption_cat_ids.push(parseInt(data.id));\r\n\t\t\t});\r\n\r\n\t\t\tvar is_valid = false;\r\n\r\n\t\t\t$.each(default_cat_ids, function(\r\n\t\t\t\tdefault_cat_index,\r\n\t\t\t\tdefault_cat_id\r\n\t\t\t) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tself.array_contains(\r\n\t\t\t\t\t\tparseInt(default_cat_id),\r\n\t\t\t\t\t\toption_cat_ids\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\tis_valid = true;\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn is_valid;\r\n\t\t};\r\n\r\n\t\tthis.get_default_option_category_ids = function() {\r\n\t\t\tvar data = this.$default_selectors_container.data(\"selected_data\");\r\n\t\t\treturn data.default_option_category_ids;\r\n\t\t};\r\n\r\n\t\tthis.set_default_option_category_ids = function(value) {\r\n\t\t\tvar data = this.$default_selectors_container.data(\"selected_data\");\r\n\t\t\tdata.default_option_category_ids = value;\r\n\t\t};\r\n\r\n\t\tthis.get_default_option_html = function() {\r\n\t\t\tvar data = this.$default_selectors_container.data(\"selected_data\");\r\n\t\t\treturn data.default_option_html;\r\n\t\t};\r\n\r\n\t\tthis.save_default_option_html = function() {\r\n\t\t\tvar data = this.$default_selectors_container.data(\"selected_data\");\r\n\r\n\t\t\tif (!self.get_default_option()) {\r\n\t\t\t\tdata.default_option_html = false;\r\n\t\t\t} else {\r\n\t\t\t\t// Clone option from the active selector.\r\n\t\t\t\tvar query_type = self.$query_type_selector.val(),\r\n\t\t\t\t\t$default_option_html =\r\n\t\t\t\t\t\t\"category_ids\" === query_type\r\n\t\t\t\t\t\t\t? self.$default_selector_categories\r\n\t\t\t\t\t\t\t\t\t.find(\":selected\")\r\n\t\t\t\t\t\t\t\t\t.clone()\r\n\t\t\t\t\t\t\t: self.$default_selector_products\r\n\t\t\t\t\t\t\t\t\t.find(\":selected\")\r\n\t\t\t\t\t\t\t\t\t.clone();\r\n\r\n\t\t\t\tdata.default_option_html = $default_option_html;\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.get_default_option = function() {\r\n\t\t\tvar data = this.$default_selectors_container.data(\"selected_data\");\r\n\t\t\treturn data.default_option_id || 0;\r\n\t\t};\r\n\r\n\t\tthis.set_default_option = function(value) {\r\n\t\t\tvar data = this.$default_selectors_container.data(\"selected_data\");\r\n\r\n\t\t\tdata.default_option_id = value || 0;\r\n\r\n\t\t\tself.save_default_option_html();\r\n\r\n\t\t\t// Clear the categories storage. Will be updated only if needed, that is if the chosen categories are changed.\r\n\t\t\tself.set_default_option_category_ids(\r\n\t\t\t\tdata.default_option_id ? null : false\r\n\t\t\t);\r\n\t\t\tself.maybe_update_default_option_category_ids();\r\n\t\t};\r\n\r\n\t\tthis.get_selector_data = function($selector) {\r\n\t\t\treturn \"yes\" === wc_composite_admin_params.is_wc_version_gte_3_2\r\n\t\t\t\t? $selector.selectWoo(\"data\")\r\n\t\t\t\t: $selector.select2(\"data\");\r\n\t\t};\r\n\r\n\t\tthis.get_category_ids = function() {\r\n\t\t\tvar selection_data = self.get_selector_data(\r\n\t\t\t\t\tself.$categories_selector\r\n\t\t\t\t),\r\n\t\t\t\toption_cat_ids = [];\r\n\r\n\t\t\t$.each(selection_data, function(index, data) {\r\n\t\t\t\toption_cat_ids.push(parseInt(data.id));\r\n\t\t\t});\r\n\r\n\t\t\treturn option_cat_ids;\r\n\t\t};\r\n\r\n\t\tthis.get_product_ids = function() {\r\n\t\t\tvar selection_data = self.get_selector_data(\r\n\t\t\t\t\tself.$products_selector\r\n\t\t\t\t),\r\n\t\t\t\tproduct_ids = [];\r\n\r\n\t\t\t$.each(selection_data, function(index, data) {\r\n\t\t\t\tproduct_ids.push(parseInt(data.id));\r\n\t\t\t});\r\n\r\n\t\t\treturn product_ids;\r\n\t\t};\r\n\r\n\t\tthis.array_contains = function(el, arr) {\r\n\t\t\treturn $.inArray(el, arr) !== -1;\r\n\t\t};\r\n\r\n\t\tthis.is_optional = function() {\r\n\t\t\treturn self.$optional_checkbox.is(\":checked\");\r\n\t\t};\r\n\r\n\t\tthis.initialize();\r\n\t}\r\n\r\n\tfunction set_component_data_dirty_state(is_dirty) {\r\n\t\tis_dirty = is_dirty ? true : false;\r\n\t\tcomponent_data_dirty = is_dirty;\r\n\t}\r\n\r\n\tfunction update_components_toolbar_state() {\r\n\t\tif ($components.length > 0) {\r\n\t\t\t$components_container.removeClass(\"no-components\");\r\n\t\t\t$components_toggle_toolbar.removeClass(\"disabled\");\r\n\t\t} else {\r\n\t\t\t$components_container.addClass(\"no-components\");\r\n\t\t\t$components_toggle_toolbar.addClass(\"disabled\");\r\n\t\t}\r\n\t}\r\n\r\n\tfunction init_component_event_handlers() {\r\n\t\t/*\r\n\t\t * Component Handlers.\r\n\t\t */\r\n\r\n\t\t$components_container\r\n\r\n\t\t\t// Expand all: selectWoo init.\r\n\t\t\t.on(\"click\", \".expand_all\", function() {\r\n\t\t\t\tif ($(this).hasClass(\"disabled\")) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.each(component_objects, function(index, component_object) {\r\n\t\t\t\t\tcomponent_object.initialize_content();\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tcomponent_object.$el\r\n\t\t\t\t\t\t\t.addClass(\"open\")\r\n\t\t\t\t\t\t\t.removeClass(\"closed\");\r\n\t\t\t\t\t\tcomponent_object.$content.show();\r\n\t\t\t\t\t}, 50);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t})\r\n\r\n\t\t\t// Close all.\r\n\t\t\t.on(\"click\", \".close_all\", function() {\r\n\t\t\t\tif ($(this).hasClass(\"disabled\")) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$.each(component_objects, function(index, component_object) {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tcomponent_object.$el\r\n\t\t\t\t\t\t\t.addClass(\"closed\")\r\n\t\t\t\t\t\t\t.removeClass(\"open\");\r\n\t\t\t\t\t\tcomponent_object.$content.hide();\r\n\t\t\t\t\t}, 10);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t})\r\n\r\n\t\t\t// selectWoo init.\r\n\t\t\t.on(\"click\", \".bto_group_handle\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tif (typeof component !== \"undefined\") {\r\n\t\t\t\t\tcomponent.component_toggled();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// Subsubsub navigation.\r\n\t\t\t.on(\"click\", \".subsubsub a\", function(e) {\r\n\t\t\t\tvar $section_link = $(this),\r\n\t\t\t\t\t$el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.section_changed($section_link);\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t})\r\n\r\n\t\t\t// Component Remove.\r\n\t\t\t.on(\"click\", \"a.remove_row\", function(e) {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\");\r\n\r\n\t\t\t\t$el.find(\"*\").off();\r\n\t\t\t\t$el.remove();\r\n\r\n\t\t\t\tdelete component_objects[el_id];\r\n\r\n\t\t\t\t$components_panel.triggerHandler(\"wc-cp-components-changed\");\r\n\r\n\t\t\t\te.preventDefault();\r\n\t\t\t})\r\n\r\n\t\t\t// Add Component.\r\n\t\t\t.on(\"click\", \"button.add_bto_group\", function() {\r\n\t\t\t\t$components_panel.block(block_params);\r\n\r\n\t\t\t\tcomponent_add_count++;\r\n\r\n\t\t\t\tvar data = {\r\n\t\t\t\t\taction: \"woocommerce_add_composite_component\",\r\n\t\t\t\t\tpost_id: woocommerce_admin_meta_boxes.post_id,\r\n\t\t\t\t\tid: component_add_count,\r\n\t\t\t\t\tsecurity: wc_composite_admin_params.add_component_nonce\r\n\t\t\t\t};\r\n\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t$.post(\r\n\t\t\t\t\t\twoocommerce_admin_meta_boxes.ajax_url,\r\n\t\t\t\t\t\tdata,\r\n\t\t\t\t\t\tfunction(response) {\r\n\t\t\t\t\t\t\t$component_metaboxes.append(response);\r\n\r\n\t\t\t\t\t\t\tvar $added = $(\r\n\t\t\t\t\t\t\t\t\t\".bto_group\",\r\n\t\t\t\t\t\t\t\t\t$component_metaboxes\r\n\t\t\t\t\t\t\t\t).last(),\r\n\t\t\t\t\t\t\t\tadded_obj = new Component($added),\r\n\t\t\t\t\t\t\t\tadded_id = \"component_\" + component_add_count;\r\n\r\n\t\t\t\t\t\t\t$added.data(\"component_metabox_id\", added_id);\r\n\t\t\t\t\t\t\tcomponent_objects[added_id] = added_obj;\r\n\r\n\t\t\t\t\t\t\t$components_panel.triggerHandler(\r\n\t\t\t\t\t\t\t\t\"wc-cp-components-changed\"\r\n\t\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t\t// selectWoo init.\r\n\t\t\t\t\t\t\tadded_obj.initialize_content();\r\n\r\n\t\t\t\t\t\t\t// Help-tips init.\r\n\t\t\t\t\t\t\t$added\r\n\t\t\t\t\t\t\t\t.find(\".woocommerce-help-tip\")\r\n\t\t\t\t\t\t\t\t.tipTip(tip_tip_params);\r\n\r\n\t\t\t\t\t\t\t$components_panel.triggerHandler(\r\n\t\t\t\t\t\t\t\t\"wc-cp-component-added\",\r\n\t\t\t\t\t\t\t\t[added_obj]\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t$components_panel.unblock();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\t\t\t\t}, 250);\r\n\r\n\t\t\t\treturn false;\r\n\t\t\t})\r\n\r\n\t\t\t// Component Keyup.\r\n\t\t\t.on(\"keyup\", \"input.group_title\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.title_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Query type.\r\n\t\t\t.on(\"change\", \"select.component_query_type\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.query_type_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Categories.\r\n\t\t\t.on(\"change\", \"select.categories_selector\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.categories_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Products.\r\n\t\t\t.on(\"change\", \"select.products_selector\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.products_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Default category option.\r\n\t\t\t.on(\"change\", \"select.default_selector_categories\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.default_option_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Default product option.\r\n\t\t\t.on(\"change\", \"select.default_selector_products\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.default_option_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Optional.\r\n\t\t\t.on(\"change\", \"input.component_optional\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.optional_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Options style.\r\n\t\t\t.on(\"change\", \"select.options_style_selector\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.options_style_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Priced individually.\r\n\t\t\t.on(\"change\", \".group_priced_individually input\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.priced_individually_input_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Filters.\r\n\t\t\t.on(\"change\", \".group_show_filters input\", function() {\r\n\t\t\t\tvar $el = $(this).closest(\".bto_group\"),\r\n\t\t\t\t\tel_id = $el.data(\"component_metabox_id\"),\r\n\t\t\t\t\tcomponent = component_objects[el_id];\r\n\r\n\t\t\t\tcomponent.show_filters_input_changed();\r\n\t\t\t})\r\n\r\n\t\t\t// Set Image.\r\n\t\t\t.on(\"click\", \".upload_component_image_button\", function(e) {\r\n\t\t\t\tcomponent_image_frame_data.$button = $(this);\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t// If the media frame already exists, reopen it.\r\n\t\t\t\tif (component_image_frame_data.image_frame) {\r\n\t\t\t\t\tcomponent_image_frame_data.image_frame.open();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Create the media frame.\r\n\t\t\t\t\tcomponent_image_frame_data.image_frame = wp.media({\r\n\t\t\t\t\t\t// Set the title of the modal.\r\n\t\t\t\t\t\ttitle:\r\n\t\t\t\t\t\t\twc_composite_admin_params.i18n_choose_component_image,\r\n\t\t\t\t\t\tbutton: {\r\n\t\t\t\t\t\t\ttext:\r\n\t\t\t\t\t\t\t\twc_composite_admin_params.i18n_set_component_image\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tstates: [\r\n\t\t\t\t\t\t\tnew wp.media.controller.Library({\r\n\t\t\t\t\t\t\t\ttitle:\r\n\t\t\t\t\t\t\t\t\twc_composite_admin_params.i18n_choose_component_image,\r\n\t\t\t\t\t\t\t\tfilterable: \"all\"\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\t// When an image is selected, run a callback.\r\n\t\t\t\t\tcomponent_image_frame_data.image_frame.on(\r\n\t\t\t\t\t\t\"select\",\r\n\t\t\t\t\t\tfunction() {\r\n\t\t\t\t\t\t\tvar attachment = component_image_frame_data.image_frame\r\n\t\t\t\t\t\t\t\t\t.state()\r\n\t\t\t\t\t\t\t\t\t.get(\"selection\")\r\n\t\t\t\t\t\t\t\t\t.first()\r\n\t\t\t\t\t\t\t\t\t.toJSON(),\r\n\t\t\t\t\t\t\t\turl =\r\n\t\t\t\t\t\t\t\t\tattachment.sizes &&\r\n\t\t\t\t\t\t\t\t\tattachment.sizes.thumbnail\r\n\t\t\t\t\t\t\t\t\t\t? attachment.sizes.thumbnail.url\r\n\t\t\t\t\t\t\t\t\t\t: attachment.url;\r\n\r\n\t\t\t\t\t\t\tcomponent_image_frame_data.$button.addClass(\r\n\t\t\t\t\t\t\t\t\"has_image\"\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\tcomponent_image_frame_data.$button\r\n\t\t\t\t\t\t\t\t.closest(\".component_image\")\r\n\t\t\t\t\t\t\t\t.find(\".remove_component_image_button\")\r\n\t\t\t\t\t\t\t\t.addClass(\"has_image\");\r\n\t\t\t\t\t\t\tcomponent_image_frame_data.$button\r\n\t\t\t\t\t\t\t\t.find(\"input\")\r\n\t\t\t\t\t\t\t\t.val(attachment.id)\r\n\t\t\t\t\t\t\t\t.change();\r\n\t\t\t\t\t\t\tcomponent_image_frame_data.$button\r\n\t\t\t\t\t\t\t\t.find(\"img\")\r\n\t\t\t\t\t\t\t\t.eq(0)\r\n\t\t\t\t\t\t\t\t.attr(\"src\", url);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\t// Finally, open the modal.\r\n\t\t\t\t\tcomponent_image_frame_data.image_frame.open();\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t\t// Remove Image.\r\n\t\t\t.on(\"click\", \".remove_component_image_button\", function(e) {\r\n\t\t\t\tvar $button = $(this),\r\n\t\t\t\t\t$option_wrapper = $button.closest(\".component_image\"),\r\n\t\t\t\t\t$upload_button = $option_wrapper.find(\r\n\t\t\t\t\t\t\".upload_component_image_button\"\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t\t$upload_button.removeClass(\"has_image\");\r\n\t\t\t\t$button.removeClass(\"has_image\");\r\n\t\t\t\t$option_wrapper\r\n\t\t\t\t\t.find(\"input\")\r\n\t\t\t\t\t.val(\"\")\r\n\t\t\t\t\t.change();\r\n\t\t\t\t$upload_button\r\n\t\t\t\t\t.find(\"img\")\r\n\t\t\t\t\t.eq(0)\r\n\t\t\t\t\t.attr(\r\n\t\t\t\t\t\t\"src\",\r\n\t\t\t\t\t\twc_composite_admin_params.wc_placeholder_img_src\r\n\t\t\t\t\t);\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction init_component_metaboxes() {\r\n\t\t// Component sorting.\r\n\t\t$component_metaboxes.sortable({\r\n\t\t\titems: \".bto_group\",\r\n\t\t\tcursor: \"move\",\r\n\t\t\taxis: \"y\",\r\n\t\t\thandle: \".sort-item\",\r\n\t\t\tscrollSensitivity: 40,\r\n\t\t\tforcePlaceholderSize: true,\r\n\t\t\thelper: \"clone\",\r\n\t\t\topacity: 0.65,\r\n\t\t\tplaceholder: \"wc-metabox-sortable-placeholder\",\r\n\t\t\tstart: function(event, ui) {\r\n\t\t\t\tui.item.css(\"background-color\", \"#f6f6f6\");\r\n\t\t\t},\r\n\t\t\tstop: function(event, ui) {\r\n\t\t\t\tui.item.removeAttr(\"style\");\r\n\t\t\t\t$components_panel.triggerHandler(\"wc-cp-components-changed\");\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tupdate_components_toolbar_state();\r\n\t}\r\n\r\n\tfunction init_component_objects() {\r\n\t\tcomponent_objects = {};\r\n\r\n\t\t// Create objects.\r\n\t\t$components.each(function(index) {\r\n\t\t\tvar $el = $(this),\r\n\t\t\t\tel_id = \"component_\" + index;\r\n\r\n\t\t\t$el.data(\"component_metabox_id\", el_id);\r\n\t\t\tcomponent_objects[el_id] = new Component($el);\r\n\t\t});\r\n\r\n\t\t// Initialize metaboxes.\r\n\t\tinit_component_metaboxes();\r\n\t}\r\n\r\n\tfunction init_components() {\r\n\t\t// Attach event handlers.\r\n\t\tinit_component_event_handlers();\r\n\r\n\t\t// Create objects.\r\n\t\tinit_component_objects();\r\n\t}\r\n\r\n\tinit_components();\r\n\r\n\tfunction init_nux() {\r\n\t\tif (\"yes\" === wc_composite_admin_params.is_first_composite) {\r\n\t\t\t$(\"select#product-type\")\r\n\t\t\t\t.val(\"composite\")\r\n\t\t\t\t.change()\r\n\t\t\t\t.focus();\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\t$(\".composite_product_options a\").trigger(\"click\");\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t}\r\n\r\n\tinit_nux();\r\n});\r\n"],"sourceRoot":""}